/*Compiled using CheerpJ (R) 2.1 by Leaning Technologies Ltd*/
cheerpjCL={cl:null};
var N19Kalman_Stack_FilterG;
function N19Kalman_Stack_Filter(){N4java4lang6Object.call(this);}
N19Kalman_Stack_Filter.cl=cheerpjCL;
function N19Kalman_Stack_FilterX(a){a.f=N19Kalman_Stack_FilterX;if(cheerpjSafeInitGuard('N19Kalman_Stack_Filter')) return;var q=a.q=N19Kalman_Stack_Filter.prototype=Object.create(N4java4lang6Object.prototype);q.constructor=N19Kalman_Stack_Filter;q.ifs=["ij/plugin/PlugIn"];q.dhr1ir_c79c=q.v11=_c4_KztcSWa08ZobiO8_HSmreDhr14vd;q.v12=_c4_KvtcSWa08ZobiO8_HSmrePxuKbc7zd;q.v13=_c4_KvtcSWa08ZobiO8_HSmre1xuKbfVcU5Dd;q.v14=_c4_KHtcSWa08ZobiO8_HSmrevtxe5W05qfSq4Hd;q.v15=_c4_KEtcSWa08ZobiO8_HSmreXp505qfSq4Ld;N19Kalman_Stack_Filter.percentvar0=0;N19Kalman_Stack_Filter.gain1=0;a.pc=-570;_c4_KxtcSWa08ZobiO8_HSmrefh7Pd(a);N19Kalman_Stack_FilterG=1;cheerpjSafeInitFinish('N19Kalman_Stack_Filter');}
var N2ij2IJG;
var N2ij3gui3GUIG;
var N2ij3gui13GenericDialogG;
var N2ij6plugin13RGBStackMergeG;
var N2ij6plugin6filter16RGBStackSplitterG;
var N2ij7process13ByteProcessorG;
var N2ij7process14FloatProcessorG;
var N2ij7process14ShortProcessorG;
var N4java4lang24IllegalArgumentExceptionG;
var N4java4lang6ObjectG;
function _c4_KxtcSWa08ZobiO8_HSmreXz7rd(d,p){_n4VYObjectC2E0(d,p);}function _c4_KztcSWa08ZobiO8_HSmreDhr14vd(q,o,p){var e=-0.,d=null,j=null,h=0,c=null,l=null,k=null,g=-0.;var a=new createStacklet_c4_KztcSWa08ZobiO8_HSmreDhr14vd(p,q);a.pc=-166;;if((N2ij2IJG|0)==0){cjG(a);};a.pc=-206;a.j=j=_c4_02ij2IJ8getImageE130(a);a.pc=-250;h=j.v76(j,a)|0;if((h|0)===1){a.pc=-289;_c4_Z2ij2IJ5errorE47(cheerpjInternString("Stac\x6b required"),a);}else{a.d=d=new N4java4lang6String();a.pc=-401;_t4VaciSxn(d,cheerpjInternString("One of your values was not properly formatted.\nThe default values will be used."),a);a.pc=-531;;if((N2ij3gui13GenericDialogG|0)==0){cjG(a);};a.c=c=new N2ij3gui13GenericDialog();a.l=l=cheerpjInternString("Kalman Stac\x6b Filter");a.pc=-675;;if((N2ij3gui3GUIG|0)==0){cjG(a);};a.pc=-720;k=_c4V32ij3gui3GUI14getParentFrameE25(a);a.pc=-771;_c4V22ij3gui13GenericDialogC2E2(c,l,k,a);k=cheerpjInternString("Acquisition_noise variance estimate:");a.pc=-884;c.v534(c,k, +N19Kalman_Stack_Filter.percentvar0,0.,2,a);k=cheerpjInternString("Bias to be placed on the prediction:");a.pc=-1012;c.v534(c,k, +N19Kalman_Stack_Filter.gain1,0.,2,a);a.pc=-1073;c.v589(c,a);a.pc=-1096;h=c.v571(c,a)|0;if((h|0)===0){a.pc=-1137;a.e=e=+c.v573(c,a);a.pc=-1167;g=+c.v573(c,a);N19Kalman_Stack_Filter.gain1=g;a.pc=-1224;h=c.v579(c,a)|0;if((h|0)===0){L0:do{if(!(!(e<=1)&&!(e<1))){g=+N19Kalman_Stack_Filter.gain1;if(!(e<0||!(g<=1)&&!(g<1))){if(!( +N19Kalman_Stack_Filter.gain1<0))break L0;}}a.pc=-1404;_c4_Z2ij2IJ5errorE47(d,a);N19Kalman_Stack_Filter.gain1=.8;a.e=e=.05;}while(0);a.pc=-1493;a.d=d=j.v113(j,a);a.pc=-1522;h=j.v89(j,a)|0;g=+N19Kalman_Stack_Filter.gain1;if((h|0)===24){a.pc=-1595;d=q.v13(q,d,e,0.,g,0.,a);}else{a.pc=-1637;q.v12(q,d,e,0.,g,0.,a);d=d;}a.pc=-1676;j.v48(j,null,d,a);}else{a.pc=-1711;_c4_Z2ij2IJ5errorE47(cheerpjInternString("Invalid input Number"),a);}}}}function _c4_KvtcSWa08ZobiO8_HSmrePxuKbc7zd(y,z,w,A,B,C,p){var n=0,d=0,e=null,r=null,c=0,o=0,l=null,g=null,h=null,k=null,u=-0.,j=null,m=-0.,q=-0.,t=-0.,s=-0.;var a=new createStacklet_c4_KvtcSWa08ZobiO8_HSmrePxuKbc7zd(p,y,z,w,B);a.pc=-228;e=z.v33(z,1,a);if(((N2ij7process13ByteProcessorG|0)&&e instanceof N2ij7process13ByteProcessor)>>0|0){a.n=n=8;}else{if(((N2ij7process14ShortProcessorG|0)&&e instanceof N2ij7process14ShortProcessor)>>0|0){a.n=n=16;}else{if(!(((N2ij7process14FloatProcessorG|0)&&e instanceof N2ij7process14FloatProcessor)>>0|0)){a.pc=-547;;if((N4java4lang24IllegalArgumentExceptionG|0)==0){cjG(a);};a.e=e=new N4java4lang24IllegalArgumentException();a.pc=-667;_m4pMulUSqyaSOfzqXq0m5Djq8qapciGWE1(e,cheerpjInternString("RGB stac\x6bs not supported"),a);a.pc=64;cheerpjThrow(a,e);}a.n=n=32;}}a.pc=-807;a.d=d=z.v19(z,a)|0;a.pc=-836;c=z.v20(z,a)|0;a.c=c=Math.imul(c,d)|0;a.pc=-884;a.o=o=z.v28(z,a)|0;d=c+1|0;new Float64Array(d)[0]=68;new Float64Array(d)[0]=68;a.l=l=new Float64Array(d);l[0]=68;new Float64Array(d)[0]=68;new Float64Array(d)[0]=68;new Float64Array(d)[0]=68;new Float64Array(d)[0]=68;a.g=g=new Float64Array(d);g[0]=68;a.h=h=new Float64Array(d);h[0]=68;a.k=k=new Float64Array(d);k[0]=68;if((c|0)>0){d=0;while(1){d=d+1|0;l[d]=w;if((d|0)<(c|0))continue;break;}}a.pc=-1285;e=z.v24(z,1,a);a.pc=-1311;e=y.v15(y,e,n,a);if((o|0)>1){a.u=u=1-B;a.r=r=e;a.e=e=l;a.d=d=1;while(1){a.pc=-1394;;if((N2ij2IJG|0)==0){cjG(a);};a.pc=-1435;_c4_12ij2IJ12showProgressE44(d,o,a);a.d=d=d+1|0;a.pc=-1494;j=z.v24(z,d,a);a.pc=-1520;j=y.v15(y,j,n,a);a.pc=-1548;j=y.v15(y,j,64,a);if((g.length-1|0|0)>0){c=0;while(1){c=c+1|0;m=+e[c];q=+e[c];g[c]=(m/(q+ +l[c]));if((c|0)<(g.length-1|0|0))continue;break;}}if((h.length-1|0|0)>0){c=0;while(1){c=c+1|0;m=+r[c];q=+j[c];t=+g[c];s=+j[c];h[c]=(m*B+u*q+t*(s- +r[c]));if((c|0)<(h.length-1|0|0))continue;break;}}if((k.length-1|0|0)>0){c=0;while(1){c=c+1|0;m=+e[c];k[c]=(m*(1- +g[c]));if((c|0)<(k.length-1|0|0))continue;break;}}a.pc=-1962;j=y.v14(y,h,n,a);a.pc=-1990;z.v25(z,j,d,a);if((d|0)<(o|0)){a.r=r=h;a.e=e=k;continue;}break;}}}function _c4_KvtcSWa08ZobiO8_HSmre1xuKbfVcU5Dd(l,x,m,n,o,q,p){var c=null,e=null,d=null,k=0,j=0,h=0,g=null;var a=new createStacklet_c4_KvtcSWa08ZobiO8_HSmre1xuKbfVcU5Dd(p,l,x,m,o);a.pc=-179;;if((N2ij6plugin6filter16RGBStackSplitterG|0)==0){cjG(a);};a.c=c=new N2ij6plugin6filter16RGBStackSplitter();a.pc=-297;_n4VYObjectC2E0(c,a);a.pc=-328;c.v14(c,x,0,a);a.pc=-353;l.v12(l,c.red1,m,0.,o,0.,a);a.pc=-391;l.v12(l,c.green2,m,0.,o,0.,a);a.pc=-431;l.v12(l,c.blue3,m,0.,o,0.,a);a.pc=-470;;if((N2ij6plugin13RGBStackMergeG|0)==0){cjG(a);};a.e=e=new N2ij6plugin13RGBStackMerge();a.pc=-568;_n4VYObjectC2E0(e,a);a.pc=-599;a.d=d=c.red1.v33(c.red1,1,a);a.pc=-638;a.k=k=d.v13(d,a)|0;a.pc=-667;a.j=j=d.v14(d,a)|0;a.pc=-696;h=c.red1.v28(c.red1,a)|0;d=c.red1;g=c.green2;return e.v18(e,k,j,h,d,g,c.blue3,0,p);}function _c4_KHtcSWa08ZobiO8_HSmrevtxe5W05qfSq4Hd(m,l,k,p){var c=0,d=null,e=-0.;switch(k|0){case 8:{d=new Int8Array(((l.length-1|0)+1|0));d[0]=66;if((l.length-1|0|0)<=0){return d;}c=0;while(1){c=c+1|0;e=+l[c];d[c]=~~e;if((c|0)<(l.length-1|0|0))continue;break;}return d;}case 16:{d=new Int16Array(((l.length-1|0)+1|0));d[0]=83;if((l.length-1|0|0)<=0){return d;}c=0;while(1){c=c+1|0;e=+l[c];d[c]=~~e;if((c|0)<(l.length-1|0|0))continue;break;}return d;}case 32:{d=new Float32Array(((l.length-1|0)+1|0));d[0]=70;if((l.length-1|0|0)<=0){return d;}c=0;while(1){c=c+1|0;d[c]=Math.fround( +l[c]);if((c|0)<(l.length-1|0|0))continue;break;}return d;}default:{return null;}}}function _c4_KEtcSWa08ZobiO8_HSmreXp505qfSq4Ld(l,k,j,p){var d=0,c=null;var a={p:p,pc:0,f:_c4_KEtcSWa08ZobiO8_HSmreXp505qfSq4Ld,k:k};switch(j|0){case 8:{a.pc=45;;if(k&&!(k[0]==66)){cjCastFailure(a,k);};c=new Float64Array(((k.length-1|0)+1|0));c[0]=68;if((c.length-1|0|0)<=0){return c;}d=0;while(1){d=d+1|0;c[d]=(+((k[d]|0)&255));if((d|0)<(c.length-1|0|0))continue;break;}return c;}case 16:{a.pc=93;;if(k&&!(k[0]==83)){cjCastFailure(a,k);};c=new Float64Array(((k.length-1|0)+1|0));c[0]=68;if((c.length-1|0|0)<=0){return c;}d=0;while(1){d=d+1|0;c[d]=(+((k[d]|0)&65535));if((d|0)<(c.length-1|0|0))continue;break;}return c;}case 32:{a.pc=140;;if(k&&!(k[0]==70)){cjCastFailure(a,k);};c=new Float64Array(((k.length-1|0)+1|0));c[0]=68;if((c.length-1|0|0)<=0){return c;}d=0;while(1){d=d+1|0;c[d]= +k[d];if((d|0)<(c.length-1|0|0))continue;break;}return c;}case 64:{a.pc=184;;if(k&&!(k[0]==68)){cjCastFailure(a,k);};c=new Float64Array(((k.length-1|0)+1|0));c[0]=68;if((c.length-1|0|0)<=0){return c;}d=0;while(1){d=d+1|0;c[d]= +k[d];if((d|0)<(c.length-1|0|0))continue;break;}return c;}default:{return null;}}}function _c4_KxtcSWa08ZobiO8_HSmrefh7Pd(p){N19Kalman_Stack_Filter.percentvar0=.05;N19Kalman_Stack_Filter.gain1=.8;}function createStacklet_c4_KvtcSWa08ZobiO8_HSmre1xuKbfVcU5Dd(p,l,x,m,o){this.p=p;this.pc=0;this.f=_c4_KvtcSWa08ZobiO8_HSmre1xuKbfVcU5Dd;this.l=l;this.x=x;this.m=+m;this.o=+o;this.c=null;this.e=null;this.d=null;this.k=0;this.j=0;}function createStacklet_c4_KztcSWa08ZobiO8_HSmreDhr14vd(p,q){this.p=p;this.pc=0;this.f=_c4_KztcSWa08ZobiO8_HSmreDhr14vd;this.e=-0.;this.d=null;this.q=q;this.j=null;this.c=null;this.l=null;}function createStacklet_c4_KvtcSWa08ZobiO8_HSmrePxuKbc7zd(p,y,z,w,B){this.p=p;this.pc=0;this.f=_c4_KvtcSWa08ZobiO8_HSmrePxuKbc7zd;this.n=0;this.d=0;this.e=null;this.r=null;this.c=0;this.y=y;this.z=z;this.w=+w;this.B=+B;this.o=0;this.l=null;this.g=null;this.h=null;this.k=null;this.u=-0.;}